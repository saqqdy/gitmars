#!/usr/bin/env node
"use strict";const{program:e}=require("commander"),n=require("shelljs"),{options:o,args:s}=require("./conf/unlink"),{createArgs:r}=require("./js/tools");e.name("gitm unlink").usage("[name]").description("解除本地包链接"),s.length>0&&e.arguments(r(s)),o.forEach((n=>{e.option(n.flags,n.description,n.defaultValue)})),e.action((e=>{let o=n.test("-L",`./node_modules/${e}`),s=n.test("-e",`./node_modules/${e}_bak`),r=n.which("yarn")?"yarn":"npm";e?o?n.exec(`${r} unlink ${e}`,{silent:!0}):n.echo("没有找到软链，请确认输入正确名称"):(n.exec(`${r} unlink`,{silent:!0}),n.echo("处理完成"),n.exit(0)),s&&n.mv(`./node_modules/${e}_bak`,`./node_modules/${e}`),n.echo("处理完成")})),e.parse(process.argv);
