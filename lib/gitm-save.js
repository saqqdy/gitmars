#!/usr/bin/env node
"use strict";const{program:e}=require("commander"),s=require("shelljs"),{options:r,args:i}=require("./conf/save"),{error:t,queue:a,getCurrent:c,isGitProject:o}=require("./js/index"),{createArgs:g}=require("./js/tools");o()||(s.echo(t("当前目录不是git项目目录")),s.exit(1)),e.name("gitm save").usage("[message]").description("暂存当前分支文件"),i.length>0&&e.arguments(g(i)),r.forEach((s=>{e.option(s.flags,s.description,s.defaultValue)})),e.action(((e,s)=>{e||(e=c());let r=[{cmd:`git stash save "${e}"`,config:{success:"文件暂存成功",fail:"出错了，请联系管理员"}}];s.force&&(r=["git add .",{cmd:`git stash save "${e}"`,config:{success:"文件暂存成功",fail:"出错了，请联系管理员"}}]),a(r)})),e.parse(process.argv);
