#!/usr/bin/env node
const{program}=require("commander");const sh=require("shelljs");const{options,args}=require("./conf/log");const{error,queue,success,getLogs,isGitProject}=require("./js/index");const{createArgs}=require("./js/tools");if(!isGitProject()){sh.echo(error("当前目录不是git项目目录"));sh.exit(1)}program.name("gitm log").usage("[branche]").description("日志查询");if(args.length>0)program.arguments(createArgs(args));options.forEach(o=>{program.option(o.flags,o.description,o.defaultValue)});program.action(async(branche,opt)=>{const logs=getLogs({lastet:opt.lastet,limit:opt.limit,branches:branche});console.log(logs);sh.exit(1)});program.parse(process.argv);