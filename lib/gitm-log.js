#!/usr/bin/env node
"use strict";const{program:e}=require("commander"),r=require("shelljs"),{options:t,args:o}=require("./conf/log"),{error:s,getLogs:i,isGitProject:a}=require("./js/index"),{createArgs:n}=require("./js/tools");a()||(r.echo(s("当前目录不是git项目目录")),r.exit(1)),e.name("gitm log").usage("[branche]").description("日志查询"),o.length>0&&e.arguments(n(o)),t.forEach((r=>{e.option(r.flags,r.description,r.defaultValue)})),e.action(((e,t)=>{return o=void 0,s=null,a=function*(){const o=i({lastet:t.lastet,limit:t.limit,branches:e});console.log(o),r.exit(1)},new Promise(((e,r)=>{var t=e=>{try{n(a.next(e))}catch(e){r(e)}},i=e=>{try{n(a.throw(e))}catch(e){r(e)}},n=r=>r.done?e(r.value):Promise.resolve(r.value).then(t,i);n((a=a.apply(o,s)).next())}));var o,s,a})),e.parse(process.argv);
