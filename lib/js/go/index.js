"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=(e,n,i)=>new Promise(((t,o)=>{var r=e=>{try{u(i.next(e))}catch(e){o(e)}},c=e=>{try{u(i.throw(e))}catch(e){o(e)}},u=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,c);u((i=i.apply(e,n)).next())}));const n=require("shelljs"),{getCurrent:i}=require("../index"),t=require("./getCommand"),o=require("./cleanConfig"),r=require("../../conf/combine"),c=require("../../conf/end"),u=require("../../conf/update"),l=require("../../conf/branch"),s=require("../../conf/build"),d=require("../../conf/start"),a=require("../../conf/copy"),p=require("../../conf/get"),f=require("../../conf/save"),m=require("../../conf/revert"),x=require("../../conf/link"),g=require("../../conf/unlink"),y=require("../../conf/postmsg"),{create:v,publish:q,update:b,clean:h}=require("../../conf/admin"),k=i().split("/")[0],A=["feature","bugfix","support"],w={create:()=>e(void 0,null,(function*(){const e=o(v),i="gitm admin create "+(yield t(e));n.exec(i)})),publish:()=>e(void 0,null,(function*(){const e=o(q),i="gitm admin publish "+(yield t(e));n.exec(i)})),update:()=>e(void 0,null,(function*(){const e=o(b),i="gitm admin update "+(yield t(e));n.exec(i)})),clean:()=>e(void 0,null,(function*(){const e=o(h),i="gitm admin clean "+(yield t(e));n.exec(i)}))};exports.admin=w,exports.branch=()=>e(void 0,null,(function*(){const e=o(l),i="gitm branch "+(yield t(e));n.exec(i)})),exports.build=()=>e(void 0,null,(function*(){const e=o(s),i="gitm build "+(yield t(e));n.exec(i)})),exports.combine=()=>e(void 0,null,(function*(){let e=[],i=[],c=[];if(A.includes(k))switch(i=["type","name"],k){case"feature":case"support":e=["--as-feature"]}else e=["--as-feature","--no-bugfix"],c=["type","name"];const u=o(r,{delOptions:e,requiredOptions:[],delArgs:i,requiredArgs:c}),l="gitm combine "+(yield t(u));n.exec(l)})),exports.copy=()=>e(void 0,null,(function*(){const e=o(a),i="gitm copy "+(yield t(e));n.exec(i)})),exports.end=()=>e(void 0,null,(function*(){let e=[],i=[];A.includes(k)?e=["type","name"]:i=["type","name"];const r=o(c,{delArgs:e,requiredArgs:i}),u="gitm end "+(yield t(r));n.exec(u)})),exports.get=()=>e(void 0,null,(function*(){const e=o(p),i="gitm get "+(yield t(e));n.exec(i)})),exports.link=()=>e(void 0,null,(function*(){const e=o(x),i="gitm link "+(yield t(e));n.exec(i)})),exports.postmsg=()=>e(void 0,null,(function*(){const e=o(y),i="gitm postmsg "+(yield t(e));n.exec(i)})),exports.revert=()=>e(void 0,null,(function*(){const e=o(m),i="gitm revert "+(yield t(e));n.exec(i)})),exports.save=()=>e(void 0,null,(function*(){const e=o(f),i="gitm save "+(yield t(e));n.exec(i)})),exports.start=()=>e(void 0,null,(function*(){const e=o(d),i="gitm start "+(yield t(e));n.exec(i)})),exports.unlink=()=>e(void 0,null,(function*(){const e=o(g),i="gitm unlink "+(yield t(e));n.exec(i)})),exports.update=()=>e(void 0,null,(function*(){let e=[],i=[];A.includes(k)?e=["type","name"]:i=["type","name"];const r=o(u,{delArgs:e,requiredArgs:i}),c="gitm update "+(yield t(r));n.exec(c)}));
