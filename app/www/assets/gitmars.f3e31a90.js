var e=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(o,a,t)=>a in o?e(o,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[a]=t,i=(e,o)=>{for(var a in o||(o={}))r.call(o,a)&&l(e,a,o[a]);if(t)for(var a of t(o))n.call(o,a)&&l(e,a,o[a]);return e},d=(e,t)=>o(e,a(t));import{U as s,r as u,ap as m,J as c,j as p,o as g,q as f,p as b,F as v,ak as y,x as C,y as h,k as x,m as V,d as j,b as w,c as _,e as q,R as k,K as O,ad as S,ac as E,af as A,N as M,ah as z,ai as U,aq as T,an as I,s as $,B as D,C as L,v as P}from"./vendor.383f6417.js";import{X as N}from"./index.250c0f6c.js";import{u as B}from"./use-current-instance.97786de8.js";import{_ as G,T as X,S as F}from"./index.24e381c2.js";const H={class:"command-wrap"},J={class:"r"},K={class:"r"};const R=s(d(i({},{name:"Command",inheritAttrs:!1}),{props:{modelValue:{type:Object,default:()=>({options:[],args:[]}),required:!0},current:String},emits:["update:modelValue"],setup:function(e,{expose:o,emit:a}){const t=u(m(e.modelValue));return t.options.forEach((e=>{"value"in e||(e.value=null)})),t.args.forEach((e=>{"value"in e||(e.value=null)})),c(t,(e=>{a("update:modelValue",e)}),{deep:!0}),o({data:t}),(e,o)=>{const a=p("el-option"),r=p("el-select"),n=p("el-input"),l=p("el-checkbox");return g(),f("div",H,[b("ul",null,[(g(!0),f(v,null,y(j(t).args,(e=>(g(),f("li",{key:e.name},[C(h(e.name)+" ",1),b("div",J,[e.options?(g(),x(r,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,key:e.name+"-arg",placeholder:e.required?"必填":"选填",clearable:""},{default:V((()=>[(g(!0),f(v,null,y(e.options,(e=>(g(),x(a,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):(g(),x(n,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,key:e.name+"-arg",placeholder:e.required?"必填":"选填",clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"]))])])))),128))]),b("ul",null,[(g(!0),f(v,null,y(j(t).options,(e=>(g(),f("li",{key:e.long},[C(h(e.description)+" ",1),b("div",K,[e.optional?(g(),f(v,{key:0},[e.options?(g(),x(r,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,key:e.long+"-arg",placeholder:e.required?"必填":"选填",clearable:""},{default:V((()=>[(g(!0),f(v,null,y(e.options,(e=>(g(),x(a,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):(g(),x(n,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,key:e.long+"-option",placeholder:e.required?"必填":"选填",clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"]))],64)):(g(),x(l,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,key:e.long+"-option-check"},null,8,["modelValue","onUpdate:modelValue"]))])])))),128))])])}}}));const W={class:"map-command-wrap"},Q=C("执行");const Y=s(d(i({},{name:"MapCommand",inheritAttrs:!1}),{props:{data:{type:Object,default:()=>({options:[],args:[]}),required:!1},value:{type:Object,default:()=>({options:[],args:[]}),required:!0},current:{type:String,default:"",required:!0}},emits:["exec"],setup:function(e,{expose:o,emit:a}){const t=e,r=w(""),{command:n,short:l}=m(t.value),i=_((()=>{let e=m(t.current).split("/");return["bugfix","feature","support"].includes(e[0])?{type:e[0],name:e[1]}:null})),d=()=>{a("exec",r.value)};return c((()=>t.value),(e=>{r.value=(({options:e,args:o})=>{let a=[],t=[],r=[];for(let n of e)if(null!==n.value){let e=n.short||n.long,o=n.value instanceof Array?n.value.join(" "):n.value;if(n.optional||!n.short){if(!o)continue;n.optional?(o=' "'+o+'"',n.defaultValue&&(o=' "'+n.defaultValue+'"'),t.push(e+o)):t.push(e)}else n.short&&(r.length>0&&(e=e.substr(1)),o&&r.push(e))}for(let n of o)n.value&&a.push(n.value);return`gitm ${n} ${a.join(" ")} ${r.join("")} ${t.join(" ")}`.replace(/[\s]{2,}/g," ")})(e)}),{deep:!0,immediate:!0}),o({curBranch:i,cmd:r,exec:d}),(e,o)=>{const a=p("v3-button");return g(),f("div",W,[b("span",null,h(r.value),1),q(a,{type:"primary",size:"small",onClick:k(d,["stop"]),plain:""},{default:V((()=>[Q])),_:1},8,["onClick"])])}}}));!function(e){const o={command:"admin",short:null,create:{command:"create",short:null,args:[{required:!0,name:"type",variadic:!1,validator:(e,o,a)=>{/\s+/.test(e)?a(new Error("请不要输入空格")):a()},description:"分支类型"}],options:[],validatorOpts:(e,o,a)=>{a()},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}},publish:{command:"publish",short:null,args:[{required:!0,name:"type",variadic:!1,validator:(e,o,a)=>{/\s+/.test(e)?a(new Error("请不要输入空格")):a()},description:"分支类型"}],options:[{flags:"-c, --combine",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"-c",long:"--combine",negate:!1,description:"是否把release代码同步到bug",defaultValue:!1,recommend:!1},{flags:"--use-rebase",required:!1,optional:!1,variadic:!1,mandatory:!1,long:"--use-rebase",negate:!1,description:"是否使用rebase方式更新，默认merge",defaultValue:!1,recommend:!1},{flags:"-p, --prod",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"-p",long:"--prod",negate:!1,description:"发布bug分支时，是否合并bug到master",defaultValue:!1,recommend:!1},{flags:"-b, --build [build]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-b",long:"--build",negate:!1,description:"构建应用",recommend:!0},{flags:"--postmsg",required:!1,optional:!1,variadic:!1,mandatory:!1,long:"--postmsg",negate:!1,description:"发送消息",defaultValue:!1,recommend:!1}],validatorOpts:(e,o,a)=>{e.includes("--combine")&&e.includes("--prod")?a(new Error("不能同时选择“把release合并到bug”和“合并bug到master”")):a()},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}},update:{command:"update",short:null,args:[{required:!0,name:"type",variadic:!1,validator:(e,o,a)=>{/\s+/.test(e)?a(new Error("请不要输入空格")):a()},description:"分支类型"}],options:[{flags:"--use-rebase",required:!1,optional:!1,variadic:!1,mandatory:!1,long:"--use-rebase",negate:!1,description:"是否使用rebase方式更新，默认merge",defaultValue:!1,recommend:!1},{flags:"-m, --mode [mode]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-m",long:"--mode",negate:!1,description:"出现冲突时，保留传入代码还是保留当前代码；1=采用当前 2=采用传入；默认为 0=手动处理。本参数不可与--use-rebase同时使用",defaultValue:0,recommend:!1},{flags:"--postmsg",required:!1,optional:!1,variadic:!1,mandatory:!1,long:"--postmsg",negate:!1,description:"发送消息",defaultValue:!1,recommend:!1}],validatorOpts:(e,o,a)=>{a()},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}},clean:{command:"clean",short:null,args:[{required:!0,name:"type",variadic:!1,validator:(e,o,a)=>{/\s+/.test(e)?a(new Error("请不要输入空格")):a()},description:"分支类型"}],options:[],validatorOpts:(e,o,a)=>{a()},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}}};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.admin=o)}("undefined"!=typeof window?window:global);var Z=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"branch",short:"bh",args:[],options:[{flags:"-k, --key [keyword]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-k",long:"--key",negate:!1,description:"查询分支的关键词",defaultValue:null},{flags:"-r, --remote",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"-r",long:"--remote",negate:!1,description:"是否查询远程分支（deletes模式下改用于删除远程分支）默认只查询本地",defaultValue:!1},{flags:"-t, --type [type]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-t",long:"--type",negate:!1,description:"查询分支的类型，共有3种：feature、bugfix、support，不传则查询全部",defaultValue:null,options:["feature","bugfix","support"],value:""},{flags:"-d, --delete [branch]",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"-d",long:"--delete",negate:!1,description:"删除分支",defaultValue:null},{flags:"-D, --forcedelete [branch]",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"-D",long:"--forcedelete",negate:!1,description:"强行删除分支",defaultValue:null},{flags:"-u, --upstream [upstream]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-u",long:"--upstream",negate:!1,description:"设置与远程分支关联"}],validatorOpts:(e,o,a)=>{e.includes("--upstream")&&(e.includes("--key")||e.includes("--remote")||e.includes("--type")||e.includes("--delete")||e.includes("--forcedelete"))?a(new Error("使用绑定/取消绑定远程分支功能时，不能与其他功能混用")):!e.includes("--delete")&&!e.includes("--forcedelete")||!e.includes("--key")&&!e.includes("--type")?a():a(new Error("使用删除分支功能时，不能与查询分支功能混用"))},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.branch=o)}("undefined"!=typeof window?window:global);var ee=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"build",short:"bd",args:[{required:!0,name:"project",variadic:!1,description:"项目名称"}],options:[{flags:"-e, --env [env]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-e",long:"--env",negate:!1,description:"构建环境，可选dev、prod、bug、all",defaultValue:"dev",recommend:!0,options:["dev","prod","bug","all"],value:"dev"},{flags:"-a, --app [app]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-a",long:"--app",negate:!1,description:"构建应用",defaultValue:"all",recommend:!0,value:"all"}]};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.build=o)}("undefined"!=typeof window?window:global);var oe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"combine",short:"cb",args:[{required:!1,name:"type",variadic:!1,description:"分支类型",options:["feature","bugfix","support"],value:""},{required:!1,name:"name",variadic:!1,description:"分支名称(不带feature/bugfix前缀)"}],options:[{flags:"-d, --dev",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"-d",long:"--dev",negate:!1,description:"同步到dev环境",defaultValue:!1,value:!0,recommend:!0},{flags:"-p, --prod",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"-p",long:"--prod",negate:!1,description:"同步到prod环境",defaultValue:!1,value:!1,recommend:!1},{flags:"-b, --build [build]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-b",long:"--build",negate:!1,description:"构建应用",value:"all",recommend:!0},{flags:"-m, --commit <commit>",required:!0,optional:!0,variadic:!1,mandatory:!1,short:"-m",long:"--commit",negate:!1,description:"执行commit，需填写信息",defaultValue:"",recommend:!1},{flags:"-a, --add",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"-a",long:"--add",negate:!1,description:"执行add",defaultValue:!1,recommend:!1},{flags:"--no-bugfix",required:!1,optional:!1,variadic:!1,mandatory:!1,long:"--no-bugfix",negate:!0,description:"bug分支合并到release时不合并到bug分支",defaultValue:!0,recommend:!1},{flags:"--as-feature",required:!1,optional:!1,variadic:!1,mandatory:!1,long:"--as-feature",negate:!1,description:"bug分支合并到release",recommend:!1}],validatorOpts:(e,o,a)=>{e.includes("--dev")||e.includes("--prod")?e.includes("--add")&&!e.includes("--commit")||!e.includes("--add")&&e.includes("--commit")?a(new Error("add和commit需要同时选择")):a():a(new Error("合并dev或者prod必须至少选一个"))},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.combine=o)}("undefined"!=typeof window?window:global);var ae=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"continue",short:"ct",args:[],options:[{flags:"-l, --list",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"-l",long:"--list",negate:!1,description:"显示指令队列",defaultValue:!1}]};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.continue=o)}("undefined"!=typeof window?window:global);var te=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"copy",short:"cp",args:[{required:!0,name:"from",variadic:!1,validator:(e,o,a)=>{/\s+/.test(e)?a(new Error("请不要输入空格")):a()},description:"来源分支"},{required:!1,name:"commitid",variadic:!0,validator:(e,o,a)=>{a()},description:"提交记录ID"}],options:[{flags:"-k, --key [keyword]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-k",long:"--key",negate:!1,description:"模糊搜索commit信息关键词",defaultValue:""},{flags:"-a, --author [author]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-a",long:"--author",negate:!1,description:"提交者",defaultValue:""}],validatorOpts:(e,o,a)=>{a()},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.copy=o)}("undefined"!=typeof window?window:global);var re=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"end",short:"ed",args:[{required:!1,name:"type",variadic:!1,description:"分支类型",options:["feature","bugfix","support"],value:""},{required:!1,name:"name",variadic:!1,description:"分支名称(不带feature/bugfix前缀)"}],options:[{flags:"--no-combine",required:!1,optional:!1,variadic:!1,mandatory:!1,long:"--no-combine",negate:!0,description:"不合并主干分支（请确保分支已经上线）",defaultValue:!0,recommend:!1},{flags:"--as-feature",required:!1,optional:!1,variadic:!1,mandatory:!1,long:"--as-feature",negate:!1,description:"bug分支合并到release",recommend:!1}],validatorOpts:(e,o,a)=>{a()},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.end=o)}("undefined"!=typeof window?window:global);var ne=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"get",short:"gt",args:[{required:!1,name:"message",variadic:!1,validator:(e,o,a)=>{/\s+/.test(e)?a(new Error("请不要输入空格")):a()},description:"存取关键字"},{required:!1,name:"index",variadic:!1,description:"序号"}],options:[{flags:"-k, --keep [keep]",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"-k",long:"--keep",negate:!1,description:"保留暂存区不删除",defaultValue:!1}],validatorOpts:(e,o,a)=>{a()},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.get=o)}("undefined"!=typeof window?window:global);var le=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"go",short:"",args:[],options:[]};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.go=o)}("undefined"!=typeof window?window:global);var ie=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"hook",short:"hk",args:[{required:!1,name:"command",variadic:!1},{required:!1,name:"args",variadic:!0}],options:[{flags:"--no-verify",required:!1,optional:!1,variadic:!1,mandatory:!1,long:"--no-verify",negate:!0,description:"是否需要跳过校验权限",defaultValue:!1},{flags:"--lastet [lastet]",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"",long:"--lastet",negate:!1,description:"查询在某个时间之后的日志，填写格式：10s/2m/2h/3d/4M/5y",defaultValue:"7d"},{flags:"--limit [limit]",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"",long:"--limit",negate:!1,description:"最多查询的日志条数",defaultValue:20},{flags:"-t, --type <type>",required:!0,optional:!1,variadic:!1,mandatory:!1,short:"-t",long:"--type",negate:!1,description:"检测类型",defaultValue:""},{flags:"--branch [branch]",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"",long:"--branch",negate:!1,description:"要查询的分支",defaultValue:""}]};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.hook=o)}("undefined"!=typeof window?window:global);var de=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"link",short:null,args:[{required:!1,name:"name",variadic:!1,validator:(e,o,a)=>{/\s+/.test(e)?a(new Error("请不要输入空格")):a()},description:"包的名称"}],options:[]};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.link=o)}("undefined"!=typeof window?window:global);var se=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"log",short:"lg",args:[{required:!1,name:"branche",variadic:!1}],options:[{flags:"--lastet [lastet]",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"",long:"--lastet",negate:!1,description:"查询在某个时间之后的日志，填写格式：10s/2m/2h/3d/4M/5y",defaultValue:"7d"},{flags:"--limit [limit]",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"",long:"--limit",negate:!1,description:"最多查询的日志条数",defaultValue:20}]};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.log=o)}("undefined"!=typeof window?window:global);var ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"postmsg",short:null,args:[{required:!0,name:"message",variadic:!1}],options:[{flags:"-u, --url [url]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-u",long:"--url",negate:!1,description:"推送消息的api地址",defaultValue:""}],validatorOpts:(e,o,a)=>{a()},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.postmsg=o)}("undefined"!=typeof window?window:global);var me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"redo",short:"rd",args:[{required:!1,name:"commitid",variadic:!0,validator:(e,o,a)=>{a()},description:"需要撤销的ID"}],options:[{flags:"-b, --branch [branch]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-b",long:"--branch",negate:!1,description:"需要撤销的分支名",defaultValue:""},{flags:"-m, --mode [mode]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-m",long:"--mode",negate:!1,description:"针对撤销一次merge记录，需要传入类型：1 = 保留当前分支代码，2 = 保留传入代码",defaultValue:1}],validatorOpts:(e,o,a)=>{a()},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.redo=o)}("undefined"!=typeof window?window:global);var ce=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"revert",short:"rt",args:[{required:!1,name:"commitid",variadic:!1,validator:(e,o,a)=>{a()},description:"需要撤销的ID"}],options:[{flags:"-n, --number [number]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-n",long:"--number",negate:!1,description:"撤销最后一次提交（或者撤销倒数第n次提交）",defaultValue:""},{flags:"-m, --mode [mode]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-m",long:"--mode",negate:!1,description:"针对撤销一次merge记录，需要传入类型：1 = 保留当前分支代码，2 = 保留传入代码",defaultValue:"",options:["1","2"],value:"1"}],validatorOpts:(e,o,a)=>{a()},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.revert=o)}("undefined"!=typeof window?window:global);var pe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"run",short:"",args:[{required:!1,name:"command",variadic:!1},{required:!1,name:"args",variadic:!0}],options:[]};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.run=o)}("undefined"!=typeof window?window:global);var ge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"save",short:"sv",args:[{required:!1,name:"message",variadic:!1,validator:(e,o,a)=>{/\s+/.test(e)?a(new Error("请不要输入空格")):a()},description:"存取关键字"}],options:[{flags:"-f, --force",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"-f",long:"--force",negate:!1,description:"没有版本的文件也暂存，这会执行git add .",defaultValue:!1}],validatorOpts:(e,o,a)=>{a()},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.save=o)}("undefined"!=typeof window?window:global);var fe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"start",short:"st",args:[{required:!0,name:"type",variadic:!1,description:"分支类型"},{required:!0,name:"name",variadic:!1,description:"分支名称(不带feature/bugfix前缀)"}],options:[{flags:"-t, --tag <tag>",required:!0,optional:!0,variadic:!1,mandatory:!1,short:"-t",long:"--tag",negate:!1,description:"从tag创建分支",defaultValue:"",recommend:!1}]};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.start=o)}("undefined"!=typeof window?window:global);var be=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"ui",short:null,args:[],options:[]};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.ui=o)}("undefined"!=typeof window?window:global);var ve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"undo",short:"ud",args:[{required:!1,name:"commitid",variadic:!0,validator:(e,o,a)=>{a()},description:"需要撤销的ID"}],options:[{flags:"-b, --branch [branch]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-b",long:"--branch",negate:!1,description:"需要撤销的分支名",defaultValue:""},{flags:"-m, --mode [mode]",required:!1,optional:!0,variadic:!1,mandatory:!1,short:"-m",long:"--mode",negate:!1,description:"针对撤销一次merge记录，需要传入类型：1 = 保留当前分支代码，2 = 保留传入代码",defaultValue:1}],validatorOpts:(e,o,a)=>{a()},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.undo=o)}("undefined"!=typeof window?window:global);var ye=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"unlink",short:null,args:[{required:!1,name:"name",variadic:!1,validator:(e,o,a)=>{/\s+/.test(e)?a(new Error("请不要输入空格")):a()},description:"包的名称"}],options:[]};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.unlink=o)}("undefined"!=typeof window?window:global);var Ce=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"update",short:"up",args:[{required:!1,name:"type",variadic:!1,description:"分支类型",options:["feature","bugfix","support"],value:""},{required:!1,name:"name",variadic:!1,description:"分支名称(不带feature/bugfix前缀)"}],options:[{flags:"--use-merge",required:!1,optional:!1,variadic:!1,mandatory:!1,long:"--use-merge",negate:!1,description:"使用merge方式更新(默认merge)",defaultValue:!0,value:!0,recommend:!0},{flags:"--use-rebase",required:!1,optional:!1,variadic:!1,mandatory:!1,long:"--use-rebase",negate:!1,description:"使用rebase方式更新(默认merge)",defaultValue:!1,recommend:!0},{flags:"-a --all",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"-a",long:"--all",negate:!1,description:"更新本地所有bugfix、feature、support分支",defaultValue:!1,recommend:!1}]};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.update=o)}("undefined"!=typeof window?window:global);var he=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});!function(e){const o={command:"upgrade",short:"ug",args:[{required:!1,name:"version",variadic:!1,validator:(e,o,a)=>{/\s+/.test(e)?a(new Error("请不要输入空格")):a()},description:"版本号"}],options:[{flags:"-m, --mirror",required:!1,optional:!1,variadic:!1,mandatory:!1,short:"-m",long:"--mirror",negate:!1,description:"是否使用淘宝镜像",defaultValue:!1}],validatorOpts:(e,o,a)=>{a()},validatorArgs:(e,o,a)=>{a()},transformOpts:(e,o,a)=>{a()},transformArgs:(e,o,a)=>{a()}};"object"==typeof exports&&"object"==typeof module?module.exports=o:"object"==typeof exports?exports.cmdConfig=o:(e.gitmarsCmdConfig||(e.gitmarsCmdConfig={}),e.gitmarsCmdConfig.upgrade=o)}("undefined"!=typeof window?window:global);const xe={"../../../../lib/conf/admin.js":Z,"../../../../lib/conf/branch.js":ee,"../../../../lib/conf/build.js":oe,"../../../../lib/conf/combine.js":ae,"../../../../lib/conf/continue.js":te,"../../../../lib/conf/copy.js":re,"../../../../lib/conf/end.js":ne,"../../../../lib/conf/get.js":le,"../../../../lib/conf/go.js":ie,"../../../../lib/conf/hook.js":de,"../../../../lib/conf/link.js":se,"../../../../lib/conf/log.js":ue,"../../../../lib/conf/postmsg.js":me,"../../../../lib/conf/redo.js":ce,"../../../../lib/conf/revert.js":pe,"../../../../lib/conf/run.js":ge,"../../../../lib/conf/save.js":fe,"../../../../lib/conf/start.js":be,"../../../../lib/conf/ui.js":ve,"../../../../lib/conf/undo.js":ye,"../../../../lib/conf/unlink.js":Ce,"../../../../lib/conf/update.js":he,"../../../../lib/conf/upgrade.js":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})};let Ve={};for(let oo in xe){let e=oo.replace(/^.+\/(\w+)\.js$/,"$1");if(!Object.keys(xe[oo]).length){Ve=window.gitmarsCmdConfig;break}Ve[e]=xe[oo]}var je=Ve;const we={class:"box row justify-center align-center"},_e=C("   /   ");const qe=s(d(i({},{inheritAttrs:!1}),{setup:function(e,{expose:o}){const a=w(),t=u({type:"feature",name:""});return B(),O((()=>{a.value.focus()})),o({data:t,submit:()=>new Promise(((e,o)=>{if(!t.type||!t.name)return A({message:"请填写分支类型和名称",type:"warning"}),void o();e(m(t))}))}),(e,o)=>{const r=p("el-option");return g(),f("div",we,[q(j(S),{class:"col-6",modelValue:j(t).type,"onUpdate:modelValue":o[0]||(o[0]=e=>j(t).type=e),placeholder:"请选择分支类型",clearable:""},{default:V((()=>[q(r,{label:"feature",value:"feature"}),q(r,{label:"bugfix",value:"bugfix"}),q(r,{label:"support",value:"support"})])),_:1},8,["modelValue"]),_e,q(j(E),{class:"col-18",ref:(e,o)=>{o.name=e,a.value=e},modelValue:j(t).name,"onUpdate:modelValue":o[1]||(o[1]=e=>j(t).name=e),placeholder:"分支名称"},null,8,["modelValue"])])}}}));const ke=s({name:"ControlGitmars",components:{Xterm:N,Command:R,MapCommand:Y},async setup(){const{getTerminal:e,fitAddon:o}=M(X,{}),{socket:a,socketGitmars:t}=M(F,{}),{globalProperties:{$axios:r,$box:n}}=B(),l=z(),i=U(),d=window.innerWidth,s=window.innerHeight,m=u({project:{id:"",name:"",path:""},terminal:{name:""},activeNames:"",branchs:[],current:"",ready:!1,error:{}}),c=_((()=>"gitmars-"+m.project.id)),p=u(je),g=_((()=>{let e={bugfix:[],feature:[],others:[]};return m.branchs.forEach((o=>{o.indexOf("bugfix/")>-1?e.bugfix.push(o):o.indexOf("feature/")>-1?e.feature.push(o):e.others.push(o)})),e}));O((()=>{t.emit("create",{name:m.project.id,cwd:m.project.path}),t.on(m.project.id+"-branch",(e=>{m&&(m.branchs=e)})),t.on(m.project.id+"-current",(e=>{m&&(m.current=e)}))})),T((()=>{t.emit("remove",m.project.id)})),I((e=>(m.error=e,!0)));const f=async()=>(await r({url:"/common/project/list",data:{id:i.query.id}})).data,b=e=>{m.terminal&&a.emit(m.terminal.name+"-input",` ${e}\r`)};m.project=await f(),await r({url:"/cmd/cd",data:{dir:m.project.path}}),m.branchs=await(async()=>(await r({url:"/cmd/branch/list",data:{}})).data)(),m.current=await(async()=>(await r({url:"/cmd/branch/current",data:{}})).data)(),m.terminal=e&&e(c.value,m.project.path,parseInt(String((d-60-300-32)/7.05)),parseInt(String((s-64-32-34-400)/17.6))),m.ready=!0;return{data:m,terminalID:c,exec:b,commandValue:p,route:i,branchList:g,handleItemClick:()=>{console.log("handleItemClick",666)},handleChange:()=>{console.log("handleChange",444)},createBranch:()=>{n(qe,{width:"640px",height:"240px",title:"创建分支",options:{},onOk:async e=>{let{type:o,name:a}=await e.component.proxy.submit();return b(`gitm start ${o} ${a}`),!0}})},back:()=>{l.push("/project/list")},checkout:async e=>{b(`git checkout ${e}`),m.project=await f()}}}}),Oe=e=>(D("data-v-3fb0eb06"),e=e(),L(),e),Se={key:0,class:"page"},Ee=C(" Gitmars工作流 "),Ae=C("创建分支"),Me=C("返回"),ze={class:"cont"},Ue={class:"nav"},Te={key:0,class:"bugfix"},Ie=Oe((()=>b("dt",null,"bug分支",-1))),$e={class:"name"},De=C("进入"),Le={key:1,class:"feature"},Pe=Oe((()=>b("dt",null,"feature分支",-1))),Ne={class:"name"},Be=C("进入"),Ge={key:2,class:"others"},Xe=Oe((()=>b("dt",null,"其他分支",-1))),Fe={class:"name"},He=C("进入"),Je={class:"main"},Ke=Oe((()=>b("span",{class:"iconfont icon-layout"},null,-1))),Re={class:"cmd"},We={class:"section"},Qe=Oe((()=>b("h4",null,"工作流",-1))),Ye={class:"section"},Ze=Oe((()=>b("h4",null,"实用工具",-1)));var eo=G(ke,[["render",function(e,o,a,t,r,n){const l=p("v3-button"),i=p("MapCommand"),d=p("Command"),s=p("v3-collapse-item"),u=p("v3-collapse"),m=p("Xterm");return e.data.ready?(g(),f("div",Se,[b("h1",null,[Ee,b("p",null,[q(l,{type:"primary",onClick:e.createBranch},{default:V((()=>[Ae])),_:1},8,["onClick"]),q(l,{type:"default",onClick:e.back},{default:V((()=>[Me])),_:1},8,["onClick"])])]),b("div",ze,[b("div",Ue,[e.branchList.bugfix.length?(g(),f("dl",Te,[Ie,(g(!0),f(v,null,y(e.branchList.bugfix,(o=>(g(),f("dd",{class:P({active:o===e.data.current}),key:o},[b("span",$e,h(o),1),o!==e.data.current?(g(),x(l,{key:0,type:"primary",size:"mini",onClick:a=>e.checkout(o),plain:""},{default:V((()=>[De])),_:2},1032,["onClick"])):$("",!0)],2)))),128))])):$("",!0),e.branchList.feature.length?(g(),f("dl",Le,[Pe,(g(!0),f(v,null,y(e.branchList.feature,(o=>(g(),f("dd",{class:P({active:o===e.data.current}),key:o},[b("span",Ne,h(o),1),o!==e.data.current?(g(),x(l,{key:0,type:"primary",size:"mini",onClick:a=>e.checkout(o),plain:""},{default:V((()=>[Be])),_:2},1032,["onClick"])):$("",!0)],2)))),128))])):$("",!0),e.branchList.others.length?(g(),f("dl",Ge,[Xe,(g(!0),f(v,null,y(e.branchList.others,(o=>(g(),f("dd",{class:P({active:o===e.data.current}),key:o},[b("span",Fe,h(o),1),o!==e.data.current?(g(),x(l,{key:0,type:"primary",size:"mini",onClick:a=>e.checkout(o),plain:""},{default:V((()=>[He])),_:2},1032,["onClick"])):$("",!0)],2)))),128))])):$("",!0)]),b("div",Je,[b("h3",null,[b("span",null,[Ke,C(" 当前分支："+h(e.data.current),1)]),b("p",null,h(e.data.project.path),1)]),b("div",Re,[b("div",We,[Qe,q(u,{modelValue:e.data.activeNames,"onUpdate:modelValue":o[6]||(o[6]=o=>e.data.activeNames=o),accordion:!0,onChange:e.handleChange},{default:V((()=>[q(s,{name:"1"},{title:V((()=>[q(i,{value:e.commandValue.combine,current:e.data.current,onExec:e.exec},null,8,["value","current","onExec"])])),default:V((()=>[q(d,{modelValue:e.commandValue.combine,"onUpdate:modelValue":o[0]||(o[0]=o=>e.commandValue.combine=o)},null,8,["modelValue"])])),_:1}),q(s,{name:"2"},{title:V((()=>[q(i,{value:e.commandValue.update,current:e.data.current,onExec:e.exec},null,8,["value","current","onExec"])])),default:V((()=>[q(d,{modelValue:e.commandValue.update,"onUpdate:modelValue":o[1]||(o[1]=o=>e.commandValue.update=o)},null,8,["modelValue"])])),_:1}),q(s,{name:"3"},{title:V((()=>[q(i,{value:e.commandValue.build,current:e.data.current,onExec:e.exec},null,8,["value","current","onExec"])])),default:V((()=>[q(d,{modelValue:e.commandValue.build,"onUpdate:modelValue":o[2]||(o[2]=o=>e.commandValue.build=o)},null,8,["modelValue"])])),_:1}),q(s,{name:"4"},{title:V((()=>[q(i,{value:e.commandValue.continue,current:e.data.current,onExec:e.exec},null,8,["value","current","onExec"])])),default:V((()=>[q(d,{modelValue:e.commandValue.continue,"onUpdate:modelValue":o[3]||(o[3]=o=>e.commandValue.continue=o)},null,8,["modelValue"])])),_:1}),q(s,{name:"5"},{title:V((()=>[q(i,{value:e.commandValue.end,current:e.data.current,onExec:e.exec},null,8,["value","current","onExec"])])),default:V((()=>[q(d,{modelValue:e.commandValue.end,"onUpdate:modelValue":o[4]||(o[4]=o=>e.commandValue.end=o)},null,8,["modelValue"])])),_:1}),q(s,{name:"6"},{title:V((()=>[q(i,{value:e.commandValue.branch,current:e.data.current,onExec:e.exec},null,8,["value","current","onExec"])])),default:V((()=>[q(d,{modelValue:e.commandValue.branch,"onUpdate:modelValue":o[5]||(o[5]=o=>e.commandValue.branch=o)},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue","onChange"])]),b("div",Ye,[Ze,q(u,{modelValue:e.data.activeNames,"onUpdate:modelValue":o[13]||(o[13]=o=>e.data.activeNames=o),accordion:!0,onChange:e.handleChange},{default:V((()=>[q(s,{name:"11"},{title:V((()=>[q(i,{value:e.commandValue.save,current:e.data.current,onExec:e.exec},null,8,["value","current","onExec"])])),default:V((()=>[q(d,{modelValue:e.commandValue.save,"onUpdate:modelValue":o[7]||(o[7]=o=>e.commandValue.save=o)},null,8,["modelValue"])])),_:1}),q(s,{name:"12"},{title:V((()=>[q(i,{value:e.commandValue.get,current:e.data.current,onExec:e.exec},null,8,["value","current","onExec"])])),default:V((()=>[q(d,{modelValue:e.commandValue.get,"onUpdate:modelValue":o[8]||(o[8]=o=>e.commandValue.get=o)},null,8,["modelValue"])])),_:1}),q(s,{name:"13"},{title:V((()=>[q(i,{value:e.commandValue.copy,current:e.data.current,onExec:e.exec},null,8,["value","current","onExec"])])),default:V((()=>[q(d,{modelValue:e.commandValue.copy,"onUpdate:modelValue":o[9]||(o[9]=o=>e.commandValue.copy=o)},null,8,["modelValue"])])),_:1}),q(s,{name:"14"},{title:V((()=>[q(i,{value:e.commandValue.revert,current:e.data.current,onExec:e.exec},null,8,["value","current","onExec"])])),default:V((()=>[q(d,{modelValue:e.commandValue.revert,"onUpdate:modelValue":o[10]||(o[10]=o=>e.commandValue.revert=o)},null,8,["modelValue"])])),_:1}),q(s,{name:"15"},{title:V((()=>[q(i,{value:e.commandValue.link,current:e.data.current,onExec:e.exec},null,8,["value","current","onExec"])])),default:V((()=>[q(d,{modelValue:e.commandValue.link,"onUpdate:modelValue":o[11]||(o[11]=o=>e.commandValue.link=o)},null,8,["modelValue"])])),_:1}),q(s,{name:"16"},{title:V((()=>[q(i,{value:e.commandValue.unlink,current:e.data.current,onExec:e.exec},null,8,["value","current","onExec"])])),default:V((()=>[q(d,{modelValue:e.commandValue.unlink,"onUpdate:modelValue":o[12]||(o[12]=o=>e.commandValue.unlink=o)},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue","onChange"])])]),e.data.project?(g(),x(m,{ref:"xterm",class:"xterm",key:"gitmars-xterm",id:e.terminalID,path:e.data.project.path},null,8,["id","path"])):$("",!0)])])])):$("",!0)}],["__scopeId","data-v-3fb0eb06"]]);export{eo as default};
