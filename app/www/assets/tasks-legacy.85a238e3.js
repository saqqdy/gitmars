!function(){function t(t,e,a,n,r,i,c){try{var o=t[i](c),s=o.value}catch(u){return void a(u)}o.done?e(s):Promise.resolve(s).then(n,r)}function e(e){return function(){var a=this,n=arguments;return new Promise((function(r,i){var c=e.apply(a,n);function o(e){t(c,r,i,o,s,"next",e)}function s(e){t(c,r,i,o,s,"throw",e)}o(void 0)}))}}var a=document.createElement("style");a.innerHTML=".page[data-v-5b2a56a3]{display:flex;flex-direction:column;justify-content:stretch;align-items:stretch}.page[data-v-5b2a56a3] .v3-collapse{border-top-color:#6a8bad}.page[data-v-5b2a56a3] .v3-collapse-item__content{color:#fff}.page[data-v-5b2a56a3] .v3-collapse-item__header,.page[data-v-5b2a56a3] .v3-collapse-item__wrap{border-bottom-color:#6a8bad;background:none;color:#fff}.page h1[data-v-5b2a56a3]{height:32px;padding:16px;line-height:32px;font-size:28px;font-weight:300;background:#344a5f;display:flex;justify-content:space-between;align-items:center}.page .cont[data-v-5b2a56a3]{flex:1;display:flex;overflow:hidden;justify-content:stretch;align-items:stretch}.page .cont .nav[data-v-5b2a56a3]{width:300px;overflow-y:auto;background:#2c3e50;height:100%}.page .cont .nav dl[data-v-5b2a56a3]{margin-bottom:10px}.page .cont .nav dt[data-v-5b2a56a3]{padding:0 16px;height:20px;line-height:20px;font-size:12px;color:#6a8bad}.page .cont .nav dd[data-v-5b2a56a3]{height:44px;line-height:44px;padding:0 16px;font-size:14px;display:flex;justify-content:space-between;align-items:center}.page .cont .nav dd[data-v-5b2a56a3]:hover{color:#fff;background:rgba(66,185,131,.05)}.page .cont .nav dd.active[data-v-5b2a56a3]{color:#42b983;background:rgba(66,185,131,.08)!important}.page .cont .main[data-v-5b2a56a3]{flex:1;padding:16px;background:#304457;display:flex;flex-direction:column;justify-content:stretch;align-items:stretch;height:100%}.page .cont .main h3[data-v-5b2a56a3]{font-size:18px;line-height:30px;margin-bottom:16px;font-weight:normal;display:flex;justify-content:space-between;align-items:center}.page .cont .main h3 p[data-v-5b2a56a3]{font-size:12px;background:#2c3e50;line-height:18px;padding:8px;border-radius:3px}.page .cont .main .xterm[data-v-5b2a56a3]{height:calc(100% - 82px);min-height:408px}\n",document.head.appendChild(a),System.register(["./vendor-legacy.391855a7.js","./index-legacy.f94e8f27.js","./index-legacy.02e744ca.js","./use-current-instance-legacy.3fbf3d7e.js"],(function(t){"use strict";var a,n,r,i,c,o,s,u,p,d,l,f,g,m,h,v,x,b,y,k,j,w,_,z,I,R,C;return{setters:[function(t){a=t.M,n=t.af,r=t.ag,i=t.r,c=t.c,o=t.I,s=t.ao,u=t.j,p=t.o,d=t.p,l=t.m,f=t.F,g=t.ai,m=t.q,h=t.x,v=t.k,x=t.z,b=t.A,y=t.v,k=t.t,j=t.e,w=t.w},function(t){_=t.X},function(t){z=t._,I=t.T,R=t.S},function(t){C=t.u}],execute:function(){var S={name:"ControlTasks",components:{Xterm:_},setup:function(){return e(regeneratorRuntime.mark((function t(){var u,p,d,l,f,g,m,h,v,x,b,y,k,j,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=a(I,{}),p=u.getTerminal,d=a(R,{}),l=d.socket,f=C(),g=f.globalProperties.$axios,n(),m=r(),h=window.innerWidth,v=window.innerHeight,x=i({project:{id:"",name:"",path:""},scripts:[],terminal:{name:""},ready:!1}),b=c((function(){return"tasks-"+x.project.id})),o((function(){})),s((function(){})),y=function(){var t=e(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g({url:"/common/project/list",data:{id:m.query.id}});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=e(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g({url:"/cmd/fs/read",data:{path:"".concat(x.project.path,"/package.json")}});case 2:return e=t.sent,a=e.data.scripts,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=function(t){x.terminal&&l.emit(x.terminal.name+"-input"," ".concat(t,"\r"))},w=function(t){j("yarn run ".concat(t))},t.next=17,y();case 17:return x.project=t.sent,t.next=20,k();case 20:return x.scripts=t.sent,t.next=23,g({url:"/cmd/cd",data:{dir:x.project.path}});case 23:return x.terminal=p&&p(b.value,x.project.path,parseInt(String((h-60-300-32)/7.05)),parseInt(String((v-64-32-34)/17.6))),x.ready=!0,t.abrupt("return",{data:x,terminalID:b,exec:j,run:w,route:m});case 26:case"end":return t.stop()}}),t)})))()}},T=function(t){return x("data-v-5b2a56a3"),t=t(),b(),t},P={key:0,class:"page"},X=T((function(){return l("h1",null,"tasks",-1)})),q={class:"cont"},D={class:"nav"},H={key:0,class:"bugfix"},M=T((function(){return l("dt",null,"脚本指令",-1)})),A=y("执行"),E={class:"main"},F=T((function(){return l("span",null,[l("span",{class:"iconfont icon-layout"}),y(" 当前分支： ")],-1)}));t("default",z(S,[["render",function(t,e,a,n,r,i){var c=u("v3-button"),o=u("Xterm");return n.data.ready?(p(),d("div",P,[X,l("div",q,[l("div",D,[Object.keys(n.data.scripts).length>0?(p(),d("dl",H,[M,(p(!0),d(f,null,g(n.data.scripts,(function(t,e){return p(),d("dd",{class:k({active:!1}),key:e},[y(h(e)+" ",1),j(c,{type:"primary",size:"mini",onClick:function(t){return n.run(e)},plain:""},{default:w((function(){return[A]})),_:2},1032,["onClick"])])})),128))])):m("",!0)]),l("div",E,[l("h3",null,[F,l("p",null,h(n.data.project.path),1)]),n.data.project?(p(),v(o,{ref:"xterm",class:"xterm",key:"tasks-xterm",id:n.terminalID,path:n.data.project.path},null,8,["id","path"])):m("",!0)])])])):m("",!0)}],["__scopeId","data-v-5b2a56a3"]]))}}}))}();
